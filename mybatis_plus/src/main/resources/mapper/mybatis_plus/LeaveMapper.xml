<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.codel.mybatis_plus.mapper.LeaveMapper">
    <insert id="insertleave">
        insert into springbootdata.`leave`(id, lid, name, leavecontent, uid, datetime, starttime, endtime, leaveDate,
                                           stare)
        values (#{id}, #{lid}, #{name}, #{leavecontent}, #{uid}, now(), #{starttime}, #{endtime}, #{leaveDate},
                #{stare});
    </insert>
    <update id="checkByUid">
        update springbootdata.`leave`
        set stare=#{state}
        where id = #{id};
    </update>


    <select id="getLeave" resultType="com.codel.mybatis_plus.pojo.Leave">
        select *
        from springbootdata.`leave`
        where id = #{id};
    </select>
    <select id="getLeaves" resultType="com.codel.mybatis_plus.pojo.Leave">
        select springbootdata.`leave`.id,
               `leave`.name,
               leavecontent,
               user.name,
               `leave`.datetime,
               starttime,
               endtime,
               leaveDate,
               lid,
               stare
        from springbootdata.`leave`,
             springbootdata.user
        where `leave`.uid = user.id;
    </select>
    <select id="selectLeavesByLid" resultType="com.codel.mybatis_plus.pojo.Leave">
        select *
        from springbootdata.`leave`
        where lid = #{lid};
    </select>
    <select id="selectByUid" resultType="com.codel.mybatis_plus.pojo.Leave">
        select *
        from springbootdata.`leave`
        where uid = #{uid};
    </select>
</mapper>
